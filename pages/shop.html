<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom T-Shirts Online | Design Your Own Shirt | Shop T-Shirt Printing | PLWGS Creative Apparel</title>
    <meta name="description" content="Shop custom t-shirts online with professional DTG printing. Design your own shirt or browse our creative collection. Custom t-shirt printing services with fast shipping and quality guarantee." />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#ff8306',
                        'primary-light': '#ffa726',
                        'primary-dark': '#e65100',
                        'glass-white': 'rgba(255, 255, 255, 0.1)',
                        'glass-black': 'rgba(0, 0, 0, 0.8)',
                        'glass-orange': 'rgba(255, 131, 6, 0.1)',
                        accent: '#ff8306',
                        background: '#000000',
                        'text-primary': '#ffffff',
                        'text-secondary': '#d1d5db',
                        surface: '#1f2937',
                        'surface-light': '#374151',
                        'surface-dark': '#111827'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'orbitron': ['Orbitron', 'sans-serif']
                    },
                    backdropBlur: {
                        'xs': '2px',
                        'glass': '20px'
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'fade-in': 'fadeIn 0.8s ease-out',
                        'scale-in': 'scaleIn 0.5s ease-out',
                        'pulse-orange': 'pulseOrange 2s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(255, 131, 6, 0.4)' },
                            '100%': { boxShadow: '0 0 40px rgba(255, 131, 6, 0.8)' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(50px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.9)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        },
                        pulseOrange: {
                            '0%, 100%': { boxShadow: '0 0 20px rgba(255, 131, 6, 0.4)' },
                            '50%': { boxShadow: '0 0 30px rgba(255, 131, 6, 0.8)' }
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* BLACK BACKGROUND BASE */
        body {
            background: #000000;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
        }
        
        /* Glass Morphism - Black Theme */
        .glass {
            backdrop-filter: blur(20px);
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-white {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 131, 6, 0.2);
            color: #000000;
        }
        
        .glass-orange {
            backdrop-filter: blur(20px);
            background: rgba(255, 131, 6, 0.1);
            border: 1px solid rgba(255, 131, 6, 0.3);
        }

        .glass-nav {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 131, 6, 0.1);
        }
        
        .glass-card {
            backdrop-filter: blur(15px);
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 131, 6, 0.2);
        }
        
        /* ORANGE GRADIENT TEXT */
        .gradient-text {
            background: linear-gradient(135deg, #ff8306, #ffa726, #ffcc80);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .text-gradient {
            background: linear-gradient(135deg, #ff8306, #ffa726, #ffcc80);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* ORANGE BUTTONS - Maximum Impact */
        .btn-primary {
            background: linear-gradient(135deg, #ff8306, #ffa726);
            color: #000000;
            font-weight: 700;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 131, 6, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 131, 6, 0.7);
            background: linear-gradient(135deg, #ffa726, #ffcc80);
        }
        
        /* Secondary Button */
        .btn-secondary {
            background: transparent;
            color: #ff8306;
            border: 2px solid #ff8306;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-secondary:hover {
            background: #ff8306;
            color: #000000;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 131, 6, 0.4);
        }

        /* Input Fields */
        .input-field {
            background: rgba(255, 255, 255, 0.95);
            color: #000000;
            border: 2px solid rgba(255, 131, 6, 0.3);
            border-radius: 25px;
            padding: 1rem 1.5rem;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #ff8306;
            box-shadow: 0 0 20px rgba(255, 131, 6, 0.3);
        }

        /* Particle Animation Styles */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ff8306;
            border-radius: 50%;
            opacity: 0.6;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .particle:nth-child(odd) {
            animation-delay: -2s;
            animation-duration: 8s;
        }
        
        .particle:nth-child(even) {
            animation-delay: -4s;
            animation-duration: 10s;
        }
        
        /* Product Card Hover Effects */
        .product-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(255, 131, 6, 0.3);
        }
        
        .product-card .product-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .product-card:hover .product-overlay {
            opacity: 1;
        }
        
        .product-card .product-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .product-card:hover .product-info {
            transform: translateY(0);
        }
        
        /* Wishlist Button Styles */
        .wishlist-btn {
            transition: all 0.3s ease;
        }
        
        .wishlist-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
        }
        
        .wishlist-btn.active {
            color: #ef4444 !important; /* Red color for active state */
        }
        
        .wishlist-btn.active:hover {
            color: #dc2626 !important; /* Darker red on hover */
        }
        
        /* Filter Sidebar Styles */
        .filter-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }
        
        /* Custom Scrollbar */
        .filter-sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .filter-sidebar::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        .filter-sidebar::-webkit-scrollbar-thumb {
            background: #ff8306;
            border-radius: 3px;
        }
        
        /* Search Autocomplete */
        .search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 131, 6, 0.2);
            border-radius: 0.5rem;
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
        }
        
        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #2a2a2a 25%, #3a3a3a 50%, #2a2a2a 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Size Selector Styles */
        .size-selector {
            background-color: #1f2937;
            border: 1px solid #374151;
            color: #f9fafb;
            transition: all 0.3s ease;
        }
        
        .size-selector:focus {
            border-color: #ff8306;
            box-shadow: 0 0 0 3px rgba(255, 131, 6, 0.1);
        }
        
        .size-selector option {
            background-color: #1f2937;
            color: #f9fafb;
        }
        
        /* Mobile Filter Chips */
        .filter-chip {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 131, 6, 0.3);
            border-radius: 2rem;
            font-size: 0.875rem;
            white-space: nowrap;
            transition: all 0.3s ease;
        }
        
        .filter-chip.active {
            background: rgba(255, 131, 6, 0.2);
            border-color: #ff8306;
        }
        
        /* Recently Viewed Bar */
        .recently-viewed {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 131, 6, 0.2);
            padding: 1.5rem;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 40;
        }
        
        .recently-viewed.show {
            transform: translateY(0);
        }
        
        /* Trending Indicator */
        .trending-indicator {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: linear-gradient(45deg, #ff8306, #ffa726);
            color: #000;
            padding: 0.25rem 0.5rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
    }
    
    /* Mobile header fixes */
    @media (max-width: 1023px) {
        #mobile-menu-toggle,
        .mobile-cart-btn {
            min-width: 48px !important;
            min-height: 48px !important;
            padding: 12px !important;
        }
    }
    
    /* Ensure buttons are never cut off */
    @media (max-width: 640px) {
        .lg\\:hidden .flex {
            gap: 12px !important;
        }
        .lg\\:hidden button {
            flex-shrink: 0 !important;
        }
    }
    </style>

</head>
<body class="bg-background text-text-primary overflow-x-hidden">
    <!-- Custom Modal -->
    <div id="customModal" class="fixed inset-0 z-50 hidden">
        <div class="fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="glass-card max-w-md w-full mx-auto transform transition-all duration-300 scale-95 opacity-0" id="modalContent">
                <div class="p-8 text-center">
                    <!-- Modal Icon -->
                    <div class="w-16 h-16 mx-auto mb-6 bg-accent bg-opacity-20 rounded-full flex items-center justify-center">
                        <svg class="w-8 h-8 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    
                    <!-- Modal Title -->
                    <h3 id="modalTitle" class="font-orbitron text-2xl font-bold text-white mb-4">Modal Title</h3>
                    
                    <!-- Modal Message -->
                    <p id="modalMessage" class="text-text-secondary text-lg mb-8 leading-relaxed">Modal message goes here</p>
                    
                    <!-- Modal Buttons -->
                    <div class="flex space-x-4">
                        <button id="modalPrimaryBtn" class="btn-primary flex-1 px-6 py-3 font-semibold">
                            Primary Action
                        </button>
                        <button id="modalSecondaryBtn" class="btn-secondary flex-1 px-6 py-3 font-semibold">
                            Secondary Action
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Particle Animation Background -->
    <div class="particles-container" id="particles">
        <!-- Particles will be generated by JavaScript -->
    </div>

    <!-- Navigation Header - Black Glass -->
    <header class="glass-nav fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-8 py-5">
            <!-- Desktop Layout -->
            <div class="hidden lg:flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-4">
                    <div class="w-14 h-14 rounded-full bg-gradient-to-r from-primary to-primary-light flex items-center justify-center animate-pulse-orange">
                        <span class="text-black font-orbitron font-black text-2xl">P</span>
                    </div>
                    <div>
                        <h1 class="font-orbitron font-black text-2xl gradient-text">PLWG'S</h1>
                        <p class="text-xs text-accent font-semibold tracking-wider">CREATIVE APPAREL</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="flex items-center space-x-10">
                    <a href="../index.html" class="text-white hover:text-accent transition-colors duration-300 font-semibold text-lg">Home</a>
                    <a href="shop.html" class="text-accent font-bold text-lg border-b-2 border-primary">Shop</a>
                    <a href="customer-login.html" class="text-white hover:text-accent transition-colors duration-300 font-semibold text-lg" id="nav-login-link">Login</a>
                    <a href="account.html" class="text-white hover:text-accent transition-colors duration-300 hidden font-semibold text-lg" id="nav-account-link">My Account</a>
                    <a href="admin.html" class="text-white hover:text-accent transition-colors duration-300 font-semibold text-lg">Admin</a>
                </div>

                <!-- Desktop Cart & Search -->
                <div class="flex items-center space-x-6">
                    <button class="text-white hover:text-accent transition-colors duration-300 relative p-3 glass rounded-full" id="desktop-cart-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 11-4 0v-6m4 0V9a2 2 0 10-4 0v4.01"/>
                        </svg>
                        <span class="absolute -top-1 -right-1 bg-primary text-black text-xs rounded-full w-6 h-6 items-center justify-center font-bold animate-pulse-orange hidden" id="cart-counter">0</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Layout -->
            <div class="lg:hidden flex items-center justify-between w-full">
                <!-- Mobile Logo -->
                <div class="flex items-center space-x-3 flex-shrink-0">
                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-primary to-primary-light flex items-center justify-center animate-pulse-orange">
                        <span class="text-black font-orbitron font-black text-xl">P</span>
                    </div>
                    <div>
                        <h1 class="font-orbitron font-black text-lg gradient-text">PLWG'S</h1>
                        <p class="text-xs text-accent font-semibold">CREATIVE APPAREL</p>
                    </div>
                </div>

                <!-- Mobile Actions -->
                <div class="flex items-center space-x-3 flex-shrink-0">
                    <!-- Cart Button -->
                    <button class="mobile-cart-btn relative text-white hover:text-accent transition-colors duration-300 p-3 rounded-lg hover:bg-gray-800 glass border border-gray-600 flex-shrink-0" aria-label="Cart" id="mobile-cart-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 11-4 0v-6m4 0V9a2 2 0 10-4 0v4.01"/>
                        </svg>
                        <span class="absolute -top-1 -right-1 bg-accent text-black text-xs rounded-full w-5 h-5 items-center justify-center text-xs leading-none font-bold hidden" id="cart-counter-mobile">0</span>
                    </button>
                    
                    <!-- Menu Button -->
                    <button id="mobile-menu-toggle" class="text-white hover:text-accent transition-colors duration-300 p-3 rounded-lg hover:bg-gray-800 glass border border-gray-600 flex-shrink-0" aria-label="Menu">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
    </header>


    <!-- Main Content -->
    <main class="pt-20 relative z-10">
        <!-- Breadcrumb Navigation -->
        <section class="py-4 border-b border-surface-light">
            <div class="container mx-auto px-6">
                <nav class="flex items-center space-x-2 text-sm">
                    <a href="../index.html" class="text-text-secondary hover:text-accent transition-colors">Home</a>
                    <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                    <span class="text-accent font-medium">Custom T-Shirts Online</span>
                </nav>
            </div>
        </section>

        <!-- Page Header with Search -->
        <section class="py-12 border-b border-surface-light">
            <div class="container mx-auto px-6">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
                    <div>
                        <h1 class="font-orbitron text-3xl font-bold text-white mb-2">Custom T-Shirts Online</h1>
                        <p class="text-text-secondary text-lg">Design your own shirt or browse our creative collection. Professional DTG printing with fast shipping.</p>
                        
                        <!-- Internal Linking to Homepage Services -->
                        <div class="mt-4 flex flex-wrap gap-4 text-sm">
                            <a href="../index.html#main-hero" class="text-accent hover:text-accent-dark transition-colors">← Back to Custom T-Shirt Printing Services</a>
                            <span class="text-text-secondary">|</span>
                            <a href="../index.html" class="text-text-secondary hover:text-accent transition-colors">View All Services</a>
                        </div>
                    </div>
                    
                    <!-- Advanced Search -->
                    <div class="relative max-w-md w-full">
                        <div class="relative">
                            <input type="text" placeholder="Search designs, themes, or styles..." class="input-field w-full pl-12 pr-4" id="search-input" />
                            <svg class="w-5 h-5 text-text-secondary absolute left-4 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                        
                        <!-- Search Dropdown -->
                            <div id="search-dropdown" class="absolute top-full left-0 right-0 mt-2 bg-surface border border-surface-light rounded-lg shadow-xl z-50 hidden">
                            <div class="p-4">
                                    <div class="text-sm text-text-secondary mb-2">Search suggestions:</div>
                                    <div class="space-y-1">
                                        <div class="px-3 py-2 hover:bg-surface-light rounded cursor-pointer text-sm" data-search="halloween">Halloween</div>
                                        <div class="px-3 py-2 hover:bg-surface-light rounded cursor-pointer text-sm" data-search="music">Music</div>
                                        <div class="px-3 py-2 hover:bg-surface-light rounded cursor-pointer text-sm" data-search="funny">Funny</div>
                                        <div class="px-3 py-2 hover:bg-surface-light rounded cursor-pointer text-sm" data-search="dad">Dad</div>
                                        <div class="px-3 py-2 hover:bg-surface-light rounded cursor-pointer text-sm" data-search="birthday">Birthday</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                                <div id="search-categories" class="space-y-2">
                                    <div class="text-gray-500 text-sm">Loading categories...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Call to Action -->
        <section class="py-6 border-b border-surface-light" id="login-cta">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <p class="text-text-secondary mb-3">Want to add items to cart and track your orders?</p>
                    <a href="customer-login.html" class="inline-flex items-center px-6 py-3 bg-accent text-black font-bold rounded-lg hover:bg-accent/90 transition-colors duration-300">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                        </svg>
                        Login to Your Account
                    </a>
                </div>
            </div>
        </section>

        <!-- Custom T-Shirt Printing Services Banner -->
        <section class="py-8 bg-gradient-to-r from-accent/10 to-accent/5 border-b border-surface-light">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="text-center">
                        <div class="w-12 h-12 mx-auto mb-4 bg-accent bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                        </div>
                        <h3 class="font-orbitron text-lg font-bold text-white mb-2">DTG Printing</h3>
                        <p class="text-text-secondary text-sm">Professional direct-to-garment printing for vibrant, detailed designs</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 mx-auto mb-4 bg-accent bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"/>
                            </svg>
                        </div>
                        <h3 class="font-orbitron text-lg font-bold text-white mb-2">Design Your Own</h3>
                        <p class="text-text-secondary text-sm">Create custom designs with our easy online designer or upload your artwork</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 mx-auto mb-4 bg-accent bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                        </div>
                        <h3 class="font-orbitron text-lg font-bold text-white mb-2">Fast Shipping</h3>
                        <p class="text-text-secondary text-sm">Quick turnaround times with quality guarantee on all custom t-shirt orders</p>
                    </div>
                </div>
            </div>
        </section>


        <!-- Mobile Filter Chips -->
        <section class="lg:hidden py-4 border-b border-surface-light">
            <div class="container mx-auto px-6">
                <div class="flex space-x-3 overflow-x-auto pb-2">
                    <button class="filter-chip active" data-category="all">Custom T-Shirts</button>
                    <button class="filter-chip" data-category="design-your-own">Design Your Own</button>
                    <button class="filter-chip" data-category="adult-shirts">Adult Shirts</button>
                    <button class="filter-chip" data-category="adult-hoodies">Adult Hoodies</button>
                    <button class="filter-chip" data-category="youth-shirts">Youth Shirts</button>
                    <button class="filter-chip" data-category="youth-hoodies">Youth Hoodies</button>
                    <button class="filter-chip" data-category="family-team">Family/Team</button>
                    <button class="filter-chip" data-category="holidays">Holidays</button>
                    <button class="filter-chip" data-filter="size">Size</button>
                    <button class="filter-chip" data-filter="color">Color</button>
                </div>
            </div>
        </section>

        <!-- Main Shop Content -->
        <section class="py-12">
            <div class="container mx-auto px-6">
                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Filter Sidebar -->
                    <aside class="hidden lg:block w-80 filter-sidebar">
                        <div class="glass-card rounded-2xl p-6 space-y-8">
                            <!-- Categories -->
                            <div>
                                <h3 class="font-orbitron text-lg font-bold text-white mb-4">Custom T-Shirt Categories</h3>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" checked />
                                        <span class="text-text-primary">All Custom T-Shirts</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="all-designs-count">(0)</span>
                                    </label>
                                    
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Design Your Own Shirt</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="design-your-own-count">(0)</span>
                                    </label>
                                    
                                    
                                    <!-- Adult Categories -->
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Adult Shirts</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="adult-shirts-count">(0)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Adult Hoodies</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="adult-hoodies-count">(0)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Adult Birthday</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="adult-birthday-count">(0)</span>
                                    </label>
                                    
                                    <!-- Youth Categories -->
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Youth Shirts</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="youth-shirts-count">(0)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Youth Hoodies</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="youth-hoodies-count">(0)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Youth Birthday</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="youth-birthday-count">(0)</span>
                                    </label>
                                    
                                    <!-- Family & Team -->
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Family/Team Shirts</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="family-team-count">(0)</span>
                                    </label>
                                    
                                    <!-- Holiday Categories -->
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Mother's Day</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="mothers-day-count">(0)</span>
                                    </label>
                                                                      <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Father's Day</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="fathers-day-count">(0)</span>
                                      </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Halloween</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="halloween-count">(0)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Christmas</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="christmas-count">(0)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent" />
                                        <span class="text-text-primary">Other Holidays</span>
                                        <span class="text-text-secondary text-sm ml-auto" id="other-holidays-count">(0)</span>
                                    </label>
                                </div>
                            </div>



                            <!-- Size Options -->
                            <div>
                                <h3 class="font-orbitron text-lg font-bold text-white mb-4">Size</h3>
                                <select id="size-filter" class="w-full px-3 py-2 bg-surface border border-surface-light rounded-lg text-text-primary focus:border-accent focus:outline-none text-sm">
                                    <option value="">All Sizes</option>
                                    <option value="S">S</option>
                                    <option value="M">M</option>
                                    <option value="L">L</option>
                                    <option value="XL">XL</option>
                                    <option value="2X">2X/XXL</option>
                                </select>
                            </div>

                            <!-- Color Options -->
                            <div>
                                <h3 class="font-orbitron text-lg font-bold text-white mb-4">Colors</h3>
                                <select id="color-filter" class="w-full px-3 py-2 bg-surface border border-surface-light rounded-lg text-text-primary focus:border-accent focus:outline-none text-sm">
                                    <option value="">All Colors</option>
                                    <option value="Black">Black</option>
                                    <option value="Navy">Navy</option>
                                    <option value="Athletic Grey Solid">Athletic Grey Solid</option>
                                    <option value="Storm Blue">Storm Blue</option>
                                    <option value="Royal Blue">Royal Blue</option>
                                    <option value="Aqua Blue">Aqua Blue</option>
                                    <option value="Teal Blue Green">Teal Blue Green</option>
                                    <option value="Mint Green">Mint Green</option>
                                    <option value="Evergreen">Evergreen</option>
                                    <option value="Military Green">Military Green</option>
                                    <option value="Army">Army</option>
                                    <option value="Natural">Natural</option>
                                    <option value="Sunset">Sunset</option>
                                    <option value="Orange">Orange</option>
                                    <option value="Autumn">Autumn</option>
                                    <option value="Gold">Gold</option>
                                    <option value="Mustard">Mustard</option>
                                    <option value="White">White</option>
                                    <option value="Charity Pink">Charity Pink</option>
                                    <option value="Fushsia">Fushsia</option>
                                    <option value="Maroon">Maroon</option>
                                    <option value="Red">Red</option>
                                    <option value="Lilac">Lilac</option>
                                    <option value="Team Purple">Team Purple</option>
                                </select>
                            </div>

                            <!-- Clear Filters -->
                            <button id="clear-filters-btn" class="w-full border border-accent text-accent py-2 px-4 rounded-lg hover:bg-accent hover:text-black transition-all duration-300">
                                Clear All Filters
                            </button>
                        </div>
                    </aside>

                    <!-- Product Grid -->
                    <div class="flex-1">
                        <!-- Sort & Results Header -->
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4">
                            <div class="text-text-secondary" id="results-display">
                                Showing <span class="text-accent font-semibold">0-0</span> of <span class="text-accent font-semibold">0</span> results
                            </div>
                            
                            <div class="flex items-center space-x-4">
                                <label class="text-text-secondary text-sm">Sort by:</label>
                                <select class="input-field text-sm">
                                    <option>Trending Now</option>
                                    <option>Newest Designs</option>
                                    <option>Customer Favorites</option>
                                    <option>Price: Low to High</option>
                                    <option>Price: High to Low</option>
                                    <option>Best Sellers</option>
                                </select>
                            </div>
                        </div>

                        <!-- Products Grid -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8" id="products-grid">
                            <!-- Loading skeleton -->
                            <div id="loading-skeleton" class="contents">
                                <div class="skeleton-card">
                                    <div class="skeleton skeleton-image mb-4"></div>
                                    <div class="skeleton skeleton-text w-3/4"></div>
                                    <div class="skeleton skeleton-text w-1/2"></div>
                                    <div class="skeleton skeleton-text w-2/3"></div>
                                </div>
                                <div class="skeleton-card">
                                    <div class="skeleton skeleton-image mb-4"></div>
                                    <div class="skeleton skeleton-text w-3/4"></div>
                                    <div class="skeleton skeleton-text w-1/2"></div>
                                    <div class="skeleton skeleton-text w-2/3"></div>
                                </div>
                                <div class="skeleton-card">
                                    <div class="skeleton skeleton-image mb-4"></div>
                                    <div class="skeleton skeleton-text w-3/4"></div>
                                    <div class="skeleton skeleton-text w-1/2"></div>
                                    <div class="skeleton skeleton-text w-2/3"></div>
                                </div>
                                <div class="skeleton-card">
                                    <div class="skeleton skeleton-image mb-4"></div>
                                    <div class="skeleton skeleton-text w-3/4"></div>
                                    <div class="skeleton skeleton-text w-1/2"></div>
                                    <div class="skeleton skeleton-text w-2/3"></div>
                                </div>
                                <div class="skeleton-card">
                                    <div class="skeleton skeleton-image mb-4"></div>
                                    <div class="skeleton skeleton-text w-3/4"></div>
                                    <div class="skeleton skeleton-text w-1/2"></div>
                                    <div class="skeleton skeleton-text w-2/3"></div>
                                </div>
                                <div class="skeleton-card">
                                    <div class="skeleton skeleton-image mb-4"></div>
                                    <div class="skeleton skeleton-text w-3/4"></div>
                                    <div class="skeleton skeleton-text w-1/2"></div>
                                    <div class="skeleton skeleton-text w-2/3"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Load More Button -->
                        <div class="text-center mt-12">
                            <button class="btn-primary px-8 py-3" id="load-more-btn">
                                Load More Designs
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Smart Recommendations -->
        <section class="py-16 border-t border-surface-light">
            <div class="container mx-auto px-6">
                <h2 class="font-orbitron text-3xl font-bold text-white mb-8 text-center">You Might Also Like</h2>
                <div id="recommendations-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Loading state -->
                    <div class="glass-card rounded-xl overflow-hidden flex items-center justify-center h-40">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-accent"></div>
                        </div>
                    <div class="glass-card rounded-xl overflow-hidden flex items-center justify-center h-40">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-accent"></div>
                    </div>
                    <div class="glass-card rounded-xl overflow-hidden flex items-center justify-center h-40">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-accent"></div>
                        </div>
                    <div class="glass-card rounded-xl overflow-hidden flex items-center justify-center h-40">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-accent"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter Signup -->
        <section class="py-20 relative z-10">
            <div class="container mx-auto px-6">
                <div class="glass-card rounded-2xl p-12 text-center max-w-4xl mx-auto">
                    <h2 class="font-orbitron text-3xl font-bold text-white mb-4">Join the Creative Rebellion</h2>
                    <p class="text-text-secondary text-lg mb-8 max-w-2xl mx-auto">
                        Be the first to know about new designs, exclusive drops, and behind-the-scenes content from Lori's creative journey.
                    </p>
                    
                    <form id="newsletterForm" class="flex flex-col sm:flex-row gap-4 max-w-lg mx-auto">
                        <input type="email" id="newsletterEmail" placeholder="Enter your email" class="input-field flex-1" required />
                        <button type="submit" id="subscribeBtn" class="btn-primary neon-glow whitespace-nowrap">
                            <span class="btn-text">Subscribe Now</span>
                            <span class="btn-loading hidden">Subscribing...</span>
                        </button>
                    </form>
                    <div id="newsletterMessage" class="mt-4 hidden"></div>
                    
                    <p class="text-text-secondary text-sm mt-4">
                        No spam, just creative inspiration. Unsubscribe anytime.
                    </p>
                </div>
            </div>
        </section>
    </main>

    <!-- Recently Viewed Bar -->
    <div class="recently-viewed" id="recently-viewed">
        <div class="container mx-auto px-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-orbitron text-lg font-bold text-white">Recently Viewed</h3>
                <button class="text-text-secondary hover:text-accent" id="close-recently-viewed">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="flex justify-center space-x-6 overflow-x-auto py-2" id="recently-viewed-products">
                <!-- Loading state -->
                <div class="flex-shrink-0 w-24 flex flex-col items-center justify-center">
                    <div class="w-20 h-20 bg-surface-light rounded-lg flex items-center justify-center mb-2">
                        <div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-accent"></div>
                </div>
                    <div class="w-16 h-4 bg-surface-light rounded animate-pulse"></div>
                    <div class="w-12 h-3 bg-surface-light rounded animate-pulse mt-1"></div>
                </div>
                <div class="flex-shrink-0 w-24 flex flex-col items-center justify-center">
                    <div class="w-20 h-20 bg-surface-light rounded-lg flex items-center justify-center mb-2">
                        <div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-accent"></div>
                </div>
                    <div class="w-16 h-4 bg-surface-light rounded animate-pulse"></div>
                    <div class="w-12 h-3 bg-surface-light rounded animate-pulse mt-1"></div>
            </div>
                <div class="flex-shrink-0 w-24 flex flex-col items-center justify-center">
                    <div class="w-20 h-20 bg-surface-light rounded-lg flex items-center justify-center mb-2">
                        <div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-accent"></div>
                    </div>
                    <div class="w-16 h-4 bg-surface-light rounded animate-pulse"></div>
                    <div class="w-12 h-3 bg-surface-light rounded animate-pulse mt-1"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer - Black Glass -->
    <footer class="glass py-20 relative border-t-2 border-primary">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                <!-- Brand -->
                <div class="space-y-6">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-r from-primary to-primary-light flex items-center justify-center animate-pulse-orange">
                            <span class="text-black font-orbitron font-black text-2xl">P</span>
                        </div>
                        <div>
                            <h3 class="font-orbitron font-black text-2xl gradient-text">PLWG'S</h3>
                            <p class="text-sm text-accent font-bold tracking-wider">CREATIVE APPAREL</p>
                        </div>
                    </div>
                    <p class="text-white text-lg leading-relaxed">
                        <span class="text-accent font-bold">Creative rebellion</span> through wearable art. Transforming everyday apparel into conversation starters since 2021.
                    </p>
                </div>

                <!-- Custom T-Shirt Services -->
                <div>
                    <h3 class="font-orbitron font-black text-accent mb-6 text-xl uppercase tracking-wider">Custom T-Shirt Services</h3>
                    <ul class="space-y-3">
                        <li><a href="../index.html" class="text-white hover:text-accent transition-colors text-lg font-medium">Custom T-Shirt Printing Online</a></li>
                        <li><a href="shop.html" class="text-white hover:text-accent transition-colors text-lg font-medium">Design Your Own Shirt</a></li>
                        <li><a href="shop.html" class="text-white hover:text-accent transition-colors text-lg font-medium">DTG Printing Services</a></li>
                        <li><a href="shop.html" class="text-white hover:text-accent transition-colors text-lg font-medium">Custom T-Shirt Collections</a></li>
                    </ul>
                </div>

                <!-- Customer Care -->
                <div>
                    <h3 class="font-orbitron font-black text-accent mb-6 text-xl uppercase tracking-wider">Customer Care</h3>
                    <ul class="space-y-3">
                        <li><a href="account.html" class="text-white hover:text-accent transition-colors text-lg font-medium">My Account</a></li>
                        <li><a href="customer-login.html" class="text-white hover:text-accent transition-colors text-lg font-medium">Customer Login</a></li>
                        <li><a href="cart.html" class="text-white hover:text-accent transition-colors text-lg font-medium">Shopping Cart</a></li>
                        <li><a href="checkout.html" class="text-white hover:text-accent transition-colors text-lg font-medium">Checkout</a></li>
                    </ul>
                </div>

                <!-- Connect -->
                <div>
                    <h3 class="font-orbitron font-black text-accent mb-6 text-xl uppercase tracking-wider">Connect</h3>
                    <div class="flex space-x-4 mb-6">
                        <a href="javascript:void(0)" class="text-white hover:text-accent transition-colors p-3 glass rounded-full">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                        <a href="javascript:void(0)" class="text-white hover:text-accent transition-colors p-3 glass rounded-full">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
                            </svg>
                        </a>
                        <a href="javascript:void(0)" class="text-white hover:text-accent transition-colors p-3 glass rounded-full">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                    </div>
                    <p class="text-white text-lg leading-relaxed">
                        Follow us for daily <span class="text-accent font-bold">inspiration</span> and behind-the-scenes content.
                    </p>
                </div>
            </div>

            <div class="border-t-2 border-primary pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-white text-lg font-medium">
                    © 2025 <span class="text-accent font-bold">PLWG'S Creative Apparel</span>. All Rights Reserved.
                </p>
                <div class="flex space-x-8 mt-4 md:mt-0">
                    <a href="privacy-policy.html" class="text-white hover:text-accent transition-colors font-medium">Privacy Policy</a>
                    <a href="terms-of-service.html" class="text-white hover:text-accent transition-colors font-medium">Terms of Service</a>
                    <a href="javascript:void(0)" class="text-white hover:text-accent transition-colors font-medium">Shipping Info</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Custom Modal Functions
        function showCustomModal(title, message, primaryText, secondaryText, primaryAction, secondaryAction) {
            const modal = document.getElementById('customModal');
            const modalContent = document.getElementById('modalContent');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalPrimaryBtn = document.getElementById('modalPrimaryBtn');
            const modalSecondaryBtn = document.getElementById('modalSecondaryBtn');
            
            // Set content
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modalPrimaryBtn.textContent = primaryText;
            modalSecondaryBtn.textContent = secondaryText;
            
            // Set actions
            modalPrimaryBtn.addEventListener('click', () => {
                closeCustomModal();
                if (primaryAction) primaryAction();
            });
            modalSecondaryBtn.addEventListener('click', () => {
                closeCustomModal();
                if (secondaryAction) secondaryAction();
            });
            
            // Show modal with animation
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }
        
        function closeCustomModal() {
            const modal = document.getElementById('customModal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }
        
        // Close modal on backdrop click
        document.getElementById('customModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeCustomModal();
            }
        });
        
        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeCustomModal();
            }
        });

        // Particle Animation
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Mobile Menu Toggle - Updated for new layout
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                let mobileMenu = document.getElementById('mobile-menu-drawer');
                if (!mobileMenu) {
                    // Create mobile menu drawer
                    mobileMenu = document.createElement('div');
                    mobileMenu.id = 'mobile-menu-drawer';
                    mobileMenu.className = 'fixed inset-0 z-50 lg:hidden';
                    mobileMenu.innerHTML = `
                        <div class="fixed inset-0 bg-black bg-opacity-50" id="mobile-menu-backdrop"></div>
                        <div class="fixed top-0 right-0 h-full w-80 bg-gray-900 shadow-xl transform transition-transform duration-300 ease-in-out">
                            <div class="p-6">
                                <div class="flex justify-between items-center mb-8">
                                    <h2 class="text-xl font-bold text-white">Menu</h2>
                                    <button id="mobile-menu-close" class="text-white hover:text-accent transition-colors">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                        </svg>
                                    </button>
                                </div>
                                <nav class="space-y-4">
                                    <a href="../index.html" class="block text-text-secondary hover:text-accent transition-colors py-2">Home</a>
                                    <a href="shop.html" class="block text-accent transition-colors py-2">Shop</a>
                                    <a href="account.html" class="block text-text-secondary hover:text-accent transition-colors py-2">My Account</a>
                                    <a href="cart.html" class="block text-text-secondary hover:text-accent transition-colors py-2">Cart</a>
                                </nav>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(mobileMenu);
                    document.body.style.overflow = 'hidden';
                    
                    // Add event listeners for mobile menu
                    document.getElementById('mobile-menu-backdrop').addEventListener('click', closeMobileMenu);
                    document.getElementById('mobile-menu-close').addEventListener('click', closeMobileMenu);
                    
                    // Animate in
                    setTimeout(() => {
                        const drawer = mobileMenu.querySelector('.fixed.top-0.right-0');
                        if (drawer) drawer.style.transform = 'translateX(0)';
                    }, 10);
                } else {
                    closeMobileMenu();
                }
            });
        }

        // Close mobile menu function
        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu-drawer');
            if (mobileMenu) {
                const drawer = mobileMenu.querySelector('.fixed.top-0.right-0');
                if (drawer) drawer.style.transform = 'translateX(100%)';
                
                setTimeout(() => {
                    mobileMenu.remove();
                    document.body.style.overflow = '';
                }, 300);
            }
        }

        // Search functionality
        const searchInput = document.getElementById('search-input');
        const searchDropdown = document.getElementById('search-dropdown');

        // Search input event listener
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase().trim();
                // console.log('🔍 Searching for:', searchTerm);
                
                if (searchTerm.length === 0) {
                    // Show all products if search is empty
                    window.filteredProducts = [];
                    displayProducts(0, allProducts);
                    updateProductCounts();
                } else {
                    // Filter products based on search term
                    const filteredProducts = allProducts.filter(product => {
                        const searchableText = [
                            product.name,
                            product.description,
                            product.category,
                            ...(product.tags || []),
                            ...(product.colors || [])
                        ].join(' ').toLowerCase();
                        
                        return searchableText.includes(searchTerm);
                    });
                    
                    // console.log('🔍 Found products:', filteredProducts.length);
                    
                    // Update filtered products and display
                    window.filteredProducts = filteredProducts;
                    displayProducts(0, filteredProducts);
                    updateProductCounts(filteredProducts.length);
                }
            });

            // Search dropdown focus/blur
            searchInput.addEventListener('focus', () => {
                if (searchDropdown) {
                    searchDropdown.classList.remove('hidden');
                }
            });

            searchInput.addEventListener('blur', () => {
                if (searchDropdown) {
                    setTimeout(() => {
                        searchDropdown.classList.add('hidden');
                    }, 200);
                }
            });

            // Search suggestion clicks
            const searchSuggestions = document.querySelectorAll('[data-search]');
            searchSuggestions.forEach(suggestion => {
                suggestion.addEventListener('click', () => {
                    const searchTerm = suggestion.dataset.search;
                    searchInput.value = searchTerm;
                    searchDropdown.classList.add('hidden');
                    
                    // Trigger search
                    const event = new Event('input', { bubbles: true });
                    searchInput.dispatchEvent(event);
                });
            });
        }

        // Filter Chips (Mobile)
        const filterChips = document.querySelectorAll('.filter-chip');
        filterChips.forEach(chip => {
            chip.addEventListener('click', () => {
                const filterType = chip.dataset.filter;
                const category = chip.dataset.category;
                
                if (filterType === 'size') {
                    // Show size filter modal or dropdown for mobile
                    showMobileSizeFilter();
                } else if (filterType === 'color') {
                    // Show color filter modal or dropdown for mobile
                    showMobileColorFilter();
                } else if (category) {
                    // Handle category filtering (existing functionality)
                // Remove active class from all chips
                filterChips.forEach(c => c.classList.remove('active'));
                // Add active class to clicked chip
                chip.classList.add('active');
                }
            });
        });
        
        // Mobile filter functions
        function showMobileSizeFilter() {
            // Create a simple mobile-friendly size filter
            const sizeOptions = ['All Sizes', 'S', 'M', 'L', 'XL', '2X/XXL'];
            const selectedSize = prompt('Select a size:\n' + sizeOptions.map((size, index) => `${index}: ${size}`).join('\n'));
            
            if (selectedSize !== null && !isNaN(selectedSize) && selectedSize >= 0 && selectedSize < sizeOptions.length) {
                const sizeFilter = document.getElementById('size-filter');
                if (sizeFilter) {
                    sizeFilter.value = selectedSize === '0' ? '' : sizeOptions[selectedSize];
                    // Trigger the change event
                    sizeFilter.dispatchEvent(new Event('change'));
                }
            }
        }
        
        function showMobileColorFilter() {
            // Create a simple mobile-friendly color filter
            const colorOptions = [
                'All Colors', 'Black', 'White', 'Natural', 'Ice Grey', 'Brown', 'Navy', 
                'Aqua', 'Royal Blue', 'Teal', 'Gold', 'Army', 'Army Green', 'Military Green', 
                'Evergreen', 'Olive Green', 'Kelly Green', 'Mint', 'Sunset', 'Orange', 
                'Autumn', 'Mustard', 'Purple', 'Lilac', 'Charity Pink', 'Fushsia', 
                'Soft Pink', 'Pink', 'Berry', 'Red', 'Maroon', 'Gray', 'Green'
            ];
            
            const selectedColor = prompt('Select a color:\n' + colorOptions.map((color, index) => `${index}: ${color}`).join('\n'));
            
            if (selectedColor !== null && !isNaN(selectedColor) && selectedColor >= 0 && selectedColor < colorOptions.length) {
                const colorFilter = document.getElementById('color-filter');
                if (colorFilter) {
                    colorFilter.value = selectedColor === '0' ? '' : colorOptions[selectedColor];
                    // Trigger the change event
                    colorFilter.dispatchEvent(new Event('change'));
                }
            }
        }

        // Recently Viewed Bar
        const recentlyViewed = document.getElementById('recently-viewed');
        const closeRecentlyViewed = document.getElementById('close-recently-viewed');

        // Show recently viewed bar after 3 seconds
        setTimeout(() => {
            recentlyViewed.classList.add('show');
        }, 3000);

        closeRecentlyViewed.addEventListener('click', () => {
            recentlyViewed.classList.remove('show');
        });

        // Load More Products - Pagination System
        const loadMoreBtn = document.getElementById('load-more-btn');
        const productsGrid = document.getElementById('products-grid');

        // Global variables for pagination and filtering
        let currentPage = 0;
        let totalPages = 1;
        let allProducts = [];
        let filteredProducts = []; // Store filtered products for pagination
        const productsPerPage = 6;

        // Load products from database
        async function loadProductsFromDatabase() {
            console.log('🔄 Loading products from database...');
            try {
                const response = await fetch('/api/products/public');
                console.log('📡 API Response status:', response.status);
                if (response.ok) {
                    const products = await response.json();
                    console.log('📦 Loaded products:', products);
                    console.log('📦 Raw products data:', JSON.stringify(products, null, 2));
                    
                    // Check each product's image URL
                    products.forEach((product, index) => {
                        console.log(`📸 Product ${index + 1}: ${product.name}`);
                        console.log(`   Image URL: ${product.image_url}`);
                        console.log(`   Has Cloudinary URL: ${product.image_url && product.image_url.startsWith('https://res.cloudinary.com')}`);
                    });
                    
                    allProducts = Array.isArray(products) ? products : [];
                    window.filteredProducts = []; // Initialize filteredProducts as empty on initial load
                    console.log('📦 Processed products array:', allProducts);
                    
                    // Debug: Check what categories are actually in the database
                    const categoriesInDB = {};
                    allProducts.forEach(product => {
                        const category = product.category || 'No Category';
                        categoriesInDB[category] = (categoriesInDB[category] || 0) + 1;
                    });
                    console.log('🔍 Categories found in database:', categoriesInDB);
                    
                    totalPages = Math.ceil(allProducts.length / productsPerPage);
                    console.log('📄 Total pages:', totalPages);
                    displayProducts(0, allProducts); // Pass allProducts explicitly
                    updateProductCounts();
                } else {
                    console.log('❌ No products found in database');
                    allProducts = [];
                    window.filteredProducts = [];
                    totalPages = 0;
                    displayProducts(0, []); // Pass empty array explicitly
                    updateProductCounts();
                }
            } catch (error) {
                console.error('❌ Error loading products:', error);
                allProducts = [];
                window.filteredProducts = [];
                totalPages = 0;
                displayProducts(0, []); // Pass empty array explicitly
                updateProductCounts();
            }
        }

        // Function to create product cards
        function createProductCard(product) {
            console.log('🎯 Creating product card for:', product.name);
            console.log('📸 Product image_url:', product.image_url);
            
            const productCard = document.createElement('div');
            productCard.className = 'product-card glass-card rounded-2xl overflow-hidden group';
            
            // Use database product fields
            const productImage = product.image_url || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjM0I0QjVCIi8+CjxwYXRoIGQ9Ik0yNSAyNUg3NVY3NUgyNVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxwYXRoIGQ9Ik0zNSA0NUw2NSA0NU02NSA2NUwzNSA2NUwzNSA0NVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo=';
            const productTitle = product.name || 'Product';
            const productCategory = product.category || 'Custom Design';
            
            // Get size pricing from product data
            const sizePricing = product.size_pricing || {};
            const defaultSize = 'M';
            const defaultPrice = sizePricing[defaultSize]?.price || parseFloat(product.price) || 20.00;
            const productPrice = `$${defaultPrice.toFixed(2)}`;
            
            console.log('🖼️ Final image URL being used:', productImage);
            console.log('💰 Size pricing data:', sizePricing);
            
            productCard.innerHTML = `
                <div class="relative">
                    <img src="${productImage}" alt="${productTitle}" class="w-full h-64 object-cover" loading="lazy" data-product-image>
                    <button class="wishlist-btn absolute top-4 right-4 w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center text-white hover:text-red-500 transition-colors" data-product-id="${product.id}">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                        </svg>
                    </button>
                    <div class="product-overlay"></div>
                    <div class="product-info">
                        <button class="btn-primary w-full text-sm view-details-btn" data-product="${encodeURIComponent(JSON.stringify(product))}">View Details</button>
                        <button class="btn-secondary w-full text-sm mt-2 add-to-cart-btn" data-product="${encodeURIComponent(JSON.stringify(product))}">Add to Cart</button>
                    </div>
                </div>
                <div class="p-6">
                    <h3 class="font-inter text-lg font-semibold text-white mb-2">${productTitle}</h3>
                    <p class="text-text-secondary text-sm mb-3">${productCategory}</p>
                    
                    <!-- Size Selection -->
                    <div class="mb-3">
                        <label class="block text-text-secondary text-sm mb-2">Size:</label>
                        <select class="size-selector w-full px-3 py-2 bg-surface border border-surface-light rounded-lg text-text-primary focus:border-accent focus:outline-none text-sm" data-product-id="${product.id}">
                            <option value="S" data-price="${sizePricing.S?.price || parseFloat(product.price) || 20.00}">S - $${(sizePricing.S?.price || parseFloat(product.price) || 20.00).toFixed(2)}</option>
                            <option value="M" data-price="${sizePricing.M?.price || parseFloat(product.price) || 20.00}" selected>M - $${(sizePricing.M?.price || parseFloat(product.price) || 20.00).toFixed(2)}</option>
                            <option value="L" data-price="${sizePricing.L?.price || parseFloat(product.price) || 20.00}">L - $${(sizePricing.L?.price || parseFloat(product.price) || 20.00).toFixed(2)}</option>
                            <option value="XL" data-price="${sizePricing.XL?.price || parseFloat(product.price) || 20.00}">XL - $${(sizePricing.XL?.price || parseFloat(product.price) || 20.00).toFixed(2)}</option>
                            <option value="2X" data-price="${sizePricing['2X']?.price || (parseFloat(product.price) || 20.00) + 4.00}">2X - $${(sizePricing['2X']?.price || (parseFloat(product.price) || 20.00) + 4.00).toFixed(2)}</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-accent font-bold text-xl product-price-display">${productPrice}</span>
                        <div class="flex items-center space-x-1">
                            <svg class="w-4 h-4 text-warning fill-current" viewBox="0 0 20 20">
                                <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                            </svg>
                            <span class="text-text-secondary text-sm">4.8 (145)</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listener for View Details button
            const viewDetailsBtn = productCard.querySelector('.view-details-btn');
            viewDetailsBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent card click
                
                try {
                    const productData = JSON.parse(decodeURIComponent(viewDetailsBtn.dataset.product));
                    
                    // Debug logging
                    console.log('=== SHOP PAGE DEBUG ===');
                    console.log('Product data for details page:', productData);
                    console.log('Product name:', productData.name);
                    console.log('Product price:', productData.price);
                    console.log('Product image:', productData.image_url);
                    
                    // Redirect to product detail page with product ID
                    const productId = productData.id || encodeURIComponent(productData.name);
                    window.location.href = `product.html?id=${productId}`;
                } catch (error) {
                    console.error('Error processing product data:', error);
                    console.error('Product data string:', viewDetailsBtn.dataset.product);
                    alert('Error loading product details. Please try again.');
                }
            });
            
            // Add event listener for Add to Cart button
            const addToCartBtn = productCard.querySelector('.add-to-cart-btn');
            if (addToCartBtn) {
                addToCartBtn.addEventListener('click', async (e) => {
                    e.stopPropagation(); // Prevent card click
                    
                    try {
                        const productData = JSON.parse(decodeURIComponent(addToCartBtn.dataset.product));
                        const sizeSelector = productCard.querySelector('.size-selector');
                        const selectedSize = sizeSelector ? sizeSelector.value : 'M';
                        
                        console.log('🛒 Adding to cart:', productData.name, 'Size:', selectedSize);
                        await addToCartAPI(productData, selectedSize);
                    } catch (error) {
                        console.error('Error adding to cart:', error);
                        alert('Error adding product to cart. Please try again.');
                    }
                });
            }
            
            // Add image error handling
            const productImageElement = productCard.querySelector('[data-product-image]');
            if (productImageElement) {
                productImageElement.addEventListener('error', function() {
                    console.error('❌ Image failed to load:', this.src);
                    this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjM0I0QjVCIi8+CjxwYXRoIGQ9Ik0yNSAyNUg3NVY3NUgyNVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxwYXRoIGQ9Ik0zNSA0NUw2NSA0NU02NSA2NUwzNSA2NUwzNSA0NVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo=';
                    this.onerror = null;
                });
                
                productImageElement.addEventListener('load', function() {
                    console.log('✅ Image loaded successfully:', this.src);
                });
            }
            
            // Add event listener for size selector to update price
            const sizeSelector = productCard.querySelector('.size-selector');
            if (sizeSelector) {
                sizeSelector.addEventListener('change', function() {
                    const selectedOption = this.options[this.selectedIndex];
                    const newPrice = parseFloat(selectedOption.dataset.price);
                    const priceDisplay = productCard.querySelector('.product-price-display');
                    
                    if (priceDisplay && !isNaN(newPrice)) {
                        priceDisplay.textContent = `$${newPrice.toFixed(2)}`;
                        console.log(`💰 Price updated to $${newPrice.toFixed(2)} for size ${this.value}`);
                    }
                });
            }
            
            // Add event listener for Wishlist button
            const wishlistBtn = productCard.querySelector('.wishlist-btn');
            if (wishlistBtn) {
                wishlistBtn.addEventListener('click', async (e) => {
                    e.stopPropagation(); // Prevent card click
                    
                    try {
                        const token = localStorage.getItem('customerToken');
                        if (!token) {
                            // Show login prompt
                            showLoginPrompt('You need to log in to add items to wishlist');
                            return;
                        }

                        const productId = parseInt(wishlistBtn.dataset.productId);
                        if (!productId) {
                            console.error('No product ID found for wishlist button');
                            return;
                        }

                        // Check if already in wishlist by looking at button state
                        const isInWishlist = wishlistBtn.classList.contains('active');
                        
                        if (isInWishlist) {
                            // Remove from wishlist
                            const response = await fetch(`/api/customer/wishlist/${productId}`, {
                                method: 'DELETE',
                                headers: {
                                    'Authorization': `Bearer ${token}`
                                }
                            });

                            if (response.ok) {
                                wishlistBtn.classList.remove('active');
                                wishlistBtn.innerHTML = `
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                    </svg>
                                `;
                                showNotification('Removed from wishlist', 'success');
                            } else {
                                throw new Error('Failed to remove from wishlist');
                            }
                        } else {
                            // Add to wishlist
                            const response = await fetch('/api/customer/wishlist', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': `Bearer ${token}`
                                },
                                body: JSON.stringify({ product_id: productId })
                            });

                            if (response.ok) {
                                wishlistBtn.classList.add('active');
                                wishlistBtn.innerHTML = `
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                `;
                                showNotification('Added to wishlist', 'success');
                            } else {
                                throw new Error('Failed to add to wishlist');
                            }
                        }
                    } catch (error) {
                        console.error('Error with wishlist:', error);
                        showNotification('Error updating wishlist. Please try again.', 'error');
                    }
                });
            }
            
            return productCard;
        }

        // Function to add item to cart via API
        async function addToCartAPI(productData, selectedSize = 'M') {
            try {
                const token = localStorage.getItem('customerToken');
                if (!token) {
                    // Show login prompt
                    showLoginPrompt('You need to log in to add items to cart');
                    return;
                }

                // Get the price for the selected size
                let unitPrice = productData.price || 0;
                if (productData.size_pricing && productData.size_pricing[selectedSize]) {
                    unitPrice = productData.size_pricing[selectedSize].price;
                }

                const cartData = {
                    product_name: productData.name,
                    quantity: 1,
                    unit_price: unitPrice,
                    size: selectedSize,
                    color: 'Black', // Default color
                    image_url: productData.image_url
                };

                console.log('Sending cart data to API:', cartData);

                const response = await fetch('/api/cart/add', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(cartData)
                });

                if (response.ok) {
                    const result = await response.json();
                    console.log('Cart API response:', result);
                    
                    // Show success message
                    showNotification('Added to cart!', 'success');
                    
                    // Update cart counter
                    updateCartCounter();
                    
                    // Show custom modal
                    setTimeout(() => {
                        showCustomModal(
                            'Item Added to Cart!',
                            'Your item has been successfully added to your cart. Would you like to view your cart?',
                            'View Cart',
                            'Continue Shopping',
                            () => window.location.href = 'cart.html',
                            () => closeCustomModal()
                        );
                    }, 1000);
                } else {
                    let errorMessage = 'Unknown error occurred';
                    
                    // Handle specific error cases
                    if (response.status === 401) {
                        errorMessage = 'Please log in to add items to cart';
                        showNotification(errorMessage, 'error');
                        setTimeout(() => {
                            if (confirm('You need to log in to add items to cart. Would you like to go to the login page?')) {
                                window.location.href = 'customer-login.html';
                            }
                        }, 1500);
                    } else if (response.status === 403) {
                        errorMessage = 'Your session has expired. Please log in again.';
                        showNotification(errorMessage, 'error');
                        localStorage.removeItem('customerToken'); // Clear expired token
                        setTimeout(() => {
                            if (confirm('Your session has expired. Would you like to log in again?')) {
                                window.location.href = 'customer-login.html';
                            }
                        }, 1500);
                    } else {
                        // Try to get error message from response, but don't consume the body twice
                        try {
                    const errorData = await response.json();
                            errorMessage = errorData.error || errorMessage;
                        } catch (parseError) {
                            console.log('Could not parse error response, using default message');
                        }
                        showNotification('Error adding to cart: ' + errorMessage, 'error');
                    }
                }
            } catch (error) {
                console.error('Error adding to cart:', error);
                showNotification('Network error. Please check your connection and try again.', 'error');
            }
        }

        // Function to show notifications
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Show login prompt function
        function showLoginPrompt(message = 'Please log in to continue') {
            const loginPrompt = document.createElement('div');
            loginPrompt.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            loginPrompt.innerHTML = `
                <div class="glass-card rounded-2xl p-8 max-w-md w-full mx-4">
                    <h2 class="font-orbitron text-2xl font-bold text-white mb-4">Login Required</h2>
                    <p class="text-text-secondary mb-6">${message}</p>
                    <div class="space-y-4">
                        <button class="btn-primary w-full" id="login-btn">Log In</button>
                        <button class="border border-accent text-accent w-full py-2 rounded-lg hover:bg-accent hover:text-black transition-all duration-300" id="create-account-btn">Create Account</button>
                        <button class="text-text-secondary w-full py-2 hover:text-accent transition-colors" id="cancel-login-btn">Cancel</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(loginPrompt);
            
            // Add event listeners for the buttons
            document.getElementById('login-btn').addEventListener('click', () => {
                window.location.href = 'customer-login.html';
            });
            document.getElementById('create-account-btn').addEventListener('click', () => {
                window.location.href = 'customer-login.html';
            });
            document.getElementById('cancel-login-btn').addEventListener('click', () => {
                loginPrompt.remove();
            });
        }

        // Function to update product counts and display
        function updateProductCounts(filteredProductsCount = null) {
            const totalProducts = filteredProductsCount !== null ? filteredProductsCount : allProducts.length;
            const startIndex = currentPage * productsPerPage + 1;
            const endIndex = Math.min((currentPage + 1) * productsPerPage, totalProducts);
            
            console.log('📊 Updating product counts:');
            console.log('📦 Total products:', totalProducts);
            console.log('📄 Current page:', currentPage);
            console.log('📋 Showing range:', startIndex, 'to', endIndex);
            
            // Update the results display
            const resultsDisplay = document.getElementById('results-display');
            if (resultsDisplay) {
                resultsDisplay.innerHTML = `Showing <span class="text-accent font-semibold">${startIndex}-${endIndex}</span> of <span class="text-accent font-semibold">${totalProducts}</span> results`;
                console.log('✅ Updated results display');
            } else {
                console.log('❌ Results display element not found');
            }
            
            // Update category counts
            const allDesignsCount = document.getElementById('all-designs-count');
            if (allDesignsCount) {
                allDesignsCount.textContent = `(${totalProducts})`;
                console.log('✅ Updated all designs count');
            } else {
                console.log('❌ All designs count element not found');
            }
            
            // Update category counts based on actual product data
            updateCategoryCounts();
            
            console.log('✅ Updated all category counts');
        }

        function displayProducts(page = 0, productsToDisplay = null) {
            const products = productsToDisplay || allProducts;
            console.log('🎨 Displaying products for page:', page);
            console.log('📦 Total products:', products.length);
            console.log('📄 Products per page:', productsPerPage);
            
            // Check if productsGrid exists
            if (!productsGrid) {
                console.error('❌ productsGrid element not found!');
                return;
            }
            
            // Clear current products and remove loading skeleton
            productsGrid.innerHTML = '';
            
            // Remove loading skeleton if it exists
            const loadingSkeleton = document.getElementById('loading-skeleton');
            if (loadingSkeleton) {
                loadingSkeleton.remove();
                console.log('✅ Removed loading skeleton');
            }
            
            // Calculate start and end indices for current page
            const startIndex = page * productsPerPage;
            const endIndex = Math.min(startIndex + productsPerPage, products.length);
            console.log('📋 Showing products from index', startIndex, 'to', endIndex);
            
            // Add products for current page
            for (let i = startIndex; i < endIndex; i++) {
                const product = products[i];
                console.log('🎯 Creating card for product:', product.name);
                const productCard = createProductCard(product);
                productsGrid.appendChild(productCard);
            }
            
            // Update button text
            if (loadMoreBtn) {
                loadMoreBtn.textContent = `Load More Designs (${page + 1}/${totalPages})`;
                
                // Hide button if we're on the last page
                if (page >= totalPages - 1) {
                    loadMoreBtn.style.display = 'none';
                } else {
                    loadMoreBtn.style.display = 'block';
                }
            } else {
                console.log('⚠️ loadMoreBtn element not found');
            }
            
            // Update product counts display
            updateProductCounts(products.length);
        }

        // Function to load more products with proper filtering logic
        function loadMoreProducts() {
            // Determine which product list to use
            const productsToUse = window.filteredProducts && window.filteredProducts.length > 0 ? window.filteredProducts : window.allProducts;
            
            currentPage++; // Increment page for the list being used
            displayProducts(currentPage, productsToUse); // Display the relevant list
        }

        // Cart counter functionality
        async function updateCartCounter() {
            try {
                const token = localStorage.getItem('customerToken');
                const cartCounter = document.getElementById('cart-counter');
                const cartCounterMobile = document.getElementById('cart-counter-mobile');
                
                if (!token) {
                    // Not logged in, hide counters
                    if (cartCounter) {
                        cartCounter.classList.add('hidden');
                        cartCounter.classList.remove('flex');
                    }
                    if (cartCounterMobile) {
                        cartCounterMobile.classList.add('hidden');
                        cartCounterMobile.classList.remove('flex');
                    }
                    return;
                }

                const response = await fetch('/api/cart', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const cartData = await response.json();
                    const cartItems = cartData.items || [];
                    const totalItems = cartItems.reduce((sum, item) => sum + (item.quantity || 0), 0);

                    if (cartCounter) {
                        if (totalItems > 0) {
                            cartCounter.textContent = totalItems;
                            cartCounter.classList.remove('hidden');
                            cartCounter.classList.add('flex');
                        } else {
                            cartCounter.classList.add('hidden');
                            cartCounter.classList.remove('flex');
                        }
                    }
                    
                    if (cartCounterMobile) {
                        if (totalItems > 0) {
                            cartCounterMobile.textContent = totalItems;
                            cartCounterMobile.classList.remove('hidden');
                            cartCounterMobile.classList.add('flex');
                        } else {
                            cartCounterMobile.classList.add('hidden');
                            cartCounterMobile.classList.remove('flex');
                        }
                    }
                } else if (response.status === 403) {
                    // Token expired or invalid, clear it and hide counters
                    localStorage.removeItem('customerToken');
                    if (cartCounter) {
                        cartCounter.classList.add('hidden');
                        cartCounter.classList.remove('flex');
                    }
                    if (cartCounterMobile) {
                        cartCounterMobile.classList.add('hidden');
                        cartCounterMobile.classList.remove('flex');
                    }
                    console.log('Cart token expired, cleared from localStorage');
                } else {
                    // Error, hide counters
                    if (cartCounter) {
                        cartCounter.classList.add('hidden');
                        cartCounter.classList.remove('flex');
                    }
                    if (cartCounterMobile) {
                        cartCounterMobile.classList.add('hidden');
                        cartCounterMobile.classList.remove('flex');
                    }
                }
            } catch (error) {
                console.error('Error updating cart counter:', error);
                const cartCounter = document.getElementById('cart-counter');
                const cartCounterMobile = document.getElementById('cart-counter-mobile');
                if (cartCounter) {
                    cartCounter.classList.add('hidden');
                    cartCounter.classList.remove('flex');
                }
                if (cartCounterMobile) {
                    cartCounterMobile.classList.add('hidden');
                    cartCounterMobile.classList.remove('flex');
                }
            }
        }

        // Check authentication status and update UI
        function checkAuthStatus() {
            const token = localStorage.getItem('customerToken');
            const authStatus = document.getElementById('auth-status');
            const loginLink = document.getElementById('login-link');
            const accountLink = document.getElementById('account-link');
            const logoutBtn = document.getElementById('logout-btn');
            const mobileLoginLink = document.getElementById('mobile-login-link');
            const mobileAccountLink = document.getElementById('mobile-account-link');
            const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
            const loginCta = document.getElementById('login-cta');
            const navLoginLink = document.getElementById('nav-login-link');
            const navAccountLink = document.getElementById('nav-account-link');
            
            if (token) {
                // User is logged in
                if (loginLink) loginLink.classList.add('hidden');
                if (accountLink) accountLink.classList.remove('hidden');
                if (logoutBtn) logoutBtn.classList.remove('hidden');
                if (mobileLoginLink) mobileLoginLink.classList.add('hidden');
                if (mobileAccountLink) mobileAccountLink.classList.remove('hidden');
                if (mobileLogoutBtn) mobileLogoutBtn.classList.remove('hidden');
                if (loginCta) loginCta.classList.add('hidden');
                if (navLoginLink) navLoginLink.classList.add('hidden');
                if (navAccountLink) navAccountLink.classList.remove('hidden');
                
                // Add logout functionality
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', () => {
                        localStorage.removeItem('customerToken');
                        checkAuthStatus();
                        updateCartCounter();
                        showNotification('Logged out successfully', 'success');
                    });
                }
                if (mobileLogoutBtn) {
                    mobileLogoutBtn.addEventListener('click', () => {
                        localStorage.removeItem('customerToken');
                        checkAuthStatus();
                        updateCartCounter();
                        showNotification('Logged out successfully', 'success');
                    });
                }
            } else {
                // User is not logged in
                if (loginLink) loginLink.classList.remove('hidden');
                if (accountLink) accountLink.classList.add('hidden');
                if (logoutBtn) logoutBtn.classList.add('hidden');
                if (mobileLoginLink) mobileLoginLink.classList.remove('hidden');
                if (mobileAccountLink) mobileAccountLink.classList.add('hidden');
                if (mobileLogoutBtn) mobileLogoutBtn.classList.add('hidden');
                if (loginCta) loginCta.classList.remove('hidden');
                if (navLoginLink) navLoginLink.classList.remove('hidden');
                if (navAccountLink) navAccountLink.classList.add('hidden');
            }
        }


        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('header');
            if (window.scrollY > 100) {
                navbar.classList.add('backdrop-blur-lg');
            } else {
                navbar.classList.remove('backdrop-blur-lg');
            }
        });

        // Load more button event listener
        if (loadMoreBtn) {
            loadMoreBtn.addEventListener('click', () => {
                // Show loading state
                loadMoreBtn.textContent = 'Loading...';
                loadMoreBtn.disabled = true;

                // Simulate loading delay
                setTimeout(() => {
                    loadMoreProducts(); // Use the new function
                    loadMoreBtn.disabled = false;
                }, 800);
            });
        } else {
            console.log('⚠️ loadMoreBtn not found, skipping event listener');
        }

        // Mouse movement particle effect
        document.addEventListener('mousemove', (e) => {
            const particles = document.querySelectorAll('.particle');
            const mouseX = e.clientX / window.innerWidth;
            const mouseY = e.clientY / window.innerHeight;

            particles.forEach((particle, index) => {
                const speed = (index % 3 + 1) * 0.5;
                const x = (mouseX - 0.5) * speed * 20;
                const y = (mouseY - 0.5) * speed * 20;
                
                particle.style.transform = `translate(${x}px, ${y}px)`;
            });
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Load smart recommendations
        async function loadRecommendations() {
            try {
                console.log('🎯 Loading recommendations...');
                const recommendationsContainer = document.getElementById('recommendations-container');
                
                if (!recommendationsContainer) {
                    console.error('❌ Recommendations container not found');
                    return;
                }
                
                // Get random products for recommendations
                const shuffled = [...allProducts].sort(() => 0.5 - Math.random());
                const recommendations = shuffled.slice(0, 4);
                
                console.log('🎯 Recommendations loaded:', recommendations.length);
                displayRecommendations(recommendations);
            } catch (error) {
                console.error('❌ Error loading recommendations:', error);
                showFallbackRecommendations();
            }
        }

        function displayRecommendations(recommendations) {
            const recommendationsContainer = document.getElementById('recommendations-container');
            if (!recommendationsContainer) return;
            
            recommendationsContainer.innerHTML = '';
            
            recommendations.forEach(product => {
                const recommendationCard = document.createElement('div');
                recommendationCard.className = 'glass-card rounded-xl overflow-hidden group cursor-pointer';
                recommendationCard.addEventListener('click', () => {
                    window.location.href = `product-details.html?id=${product.id}`;
                });
                
                const productImage = product.image_url || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjM0I0QjVCIi8+CjxwYXRoIGQ9Ik0yNSAyNUg3NVY3NUgyNVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxwYXRoIGQ9Ik0zNSA0NUw2NSA0NU02NSA2NUwzNSA2NUwzNSA0NVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo=';
                const productTitle = product.name || 'Product';
                const productPrice = `$${parseFloat(product.price || 20).toFixed(2)}`;
                
                recommendationCard.innerHTML = `
                    <div class="relative">
                        <img src="${productImage}" alt="${productTitle}" class="w-full h-40 object-cover" loading="lazy">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300"></div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-white text-sm mb-2 line-clamp-2">${productTitle}</h3>
                        <p class="text-accent font-bold">${productPrice}</p>
                    </div>
                `;
                
                recommendationsContainer.appendChild(recommendationCard);
            });
        }

        async function showFallbackRecommendations() {
            const recommendationsContainer = document.getElementById('recommendations-container');
            if (!recommendationsContainer) return;
            
            recommendationsContainer.innerHTML = `
                <div class="col-span-full text-center py-8">
                    <p class="text-text-secondary">No recommendations available at the moment.</p>
                </div>
            `;
        }

        // Load recently viewed products
        async function loadRecentlyViewedProducts() {
            try {
                console.log('📱 Loading recently viewed products...');
                const recentlyViewedIds = JSON.parse(localStorage.getItem('recentlyViewed') || '[]');
                console.log('📱 Recently viewed product IDs from localStorage:', recentlyViewedIds);
                
                if (recentlyViewedIds.length > 0) {
                    console.log('📱 Converting IDs to product objects...');
                    // Convert IDs to actual product objects
                    const recentlyViewedProducts = recentlyViewedIds
                        .map(id => allProducts.find(product => product.id.toString() === id))
                        .filter(product => product !== undefined); // Remove any undefined products
                    
                    console.log('📱 Converted to products:', recentlyViewedProducts.length);
                    
                    if (recentlyViewedProducts.length > 0) {
                        console.log('📱 Displaying recently viewed products');
                        displayRecentlyViewedProducts(recentlyViewedProducts);
                    } else {
                        console.log('📱 No valid products found, showing random fallback');
                        await loadRandomProductsAsFallback();
                    }
                } else {
                    console.log('📱 No recently viewed products, showing random fallback');
                    // Show fallback recommendations
                    await loadRandomProductsAsFallback();
                }
            } catch (error) {
                console.error('❌ Error loading recently viewed products:', error);
                console.log('📱 Showing hardcoded fallback');
                showHardcodedRecentlyViewedFallback();
            }
        }

        function displayRecentlyViewedProducts(products) {
            console.log('📱 Displaying recently viewed products:', products);
            const recentlyViewedContainer = document.getElementById('recently-viewed-products');
            if (!recentlyViewedContainer) {
                console.error('❌ Recently viewed container not found');
                return;
            }
            
            recentlyViewedContainer.innerHTML = '';
            console.log('📱 Products to display:', products.length);
            
            products.slice(0, 3).forEach((product, index) => {
                console.log(`📱 Creating product card ${index + 1}:`, product.name);
                const productCard = document.createElement('div');
                productCard.className = 'flex-shrink-0 w-24 flex flex-col items-center cursor-pointer';
                productCard.addEventListener('click', () => {
                    window.location.href = `product-details.html?id=${product.id}`;
                });
                
                const productImage = product.image_url || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjM0I0QjVCIi8+CjxwYXRoIGQ9Ik0yNSAyNUg3NVY3NUgyNVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxwYXRoIGQ9Ik0zNSA0NUw2NSA0NU02NSA2NUwzNSA2NUwzNSA0NVoiIHN0cm9rZT0iIzAwQkNENCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo=';
                const productTitle = product.name || 'Product';
                
                productCard.innerHTML = `
                    <div class="w-20 h-20 bg-surface-light rounded-lg flex items-center justify-center mb-2 overflow-hidden">
                        <img src="${productImage}" alt="${productTitle}" class="w-full h-full object-cover">
                    </div>
                    <p class="text-xs text-text-secondary text-center line-clamp-2">${productTitle}</p>
                `;
                
                recentlyViewedContainer.appendChild(productCard);
            });
        }

        async function loadRandomProductsAsFallback() {
            try {
                console.log('📱 Loading random products as fallback...');
                console.log('📱 All products available:', allProducts.length);
                
                if (allProducts.length === 0) {
                    console.log('📱 No products available, showing hardcoded fallback');
                    showHardcodedRecentlyViewedFallback();
                    return;
                }
                
                const shuffled = [...allProducts].sort(() => 0.5 - Math.random());
                const randomProducts = shuffled.slice(0, 3);
                console.log('📱 Random products selected:', randomProducts.length);
                displayRecentlyViewedProducts(randomProducts);
            } catch (error) {
                console.error('❌ Error loading random products:', error);
                showHardcodedRecentlyViewedFallback();
            }
        }

        function showHardcodedRecentlyViewedFallback() {
            const recentlyViewedContainer = document.getElementById('recently-viewed-products');
            if (!recentlyViewedContainer) return;
            
            recentlyViewedContainer.innerHTML = `
                <div class="flex-shrink-0 text-center">
                    <p class="text-text-secondary text-sm">No recently viewed items</p>
                </div>
            `;
        }

        // Category filtering functionality
        let selectedCategories = ['All Designs'];
        let allCategories = [];
        
        // Load categories dynamically from database
        async function loadCategories() {
            try {
                console.log('🔄 Loading categories from API...');
                const response = await fetch('/api/admin/categories');
                console.log('📡 Categories API response status:', response.status);
                if (response.ok) {
                    allCategories = await response.json();
                    console.log('📋 Categories loaded:', allCategories.length, 'categories');
                    console.log('📋 Categories data:', allCategories);
                    updateCategoryFilterSidebar();
                    updateCategoryCounts();
                } else {
                    console.error('❌ Failed to load categories, status:', response.status);
                }
            } catch (error) {
                console.error('❌ Error loading categories:', error);
            }
        }
        
        // Update category filter sidebar dynamically
        function updateCategoryFilterSidebar() {
            console.log('🔄 Updating category filter sidebar...');
            console.log('📋 Current allCategories:', allCategories);
            
            // Update main category filter section
            const categorySection = document.querySelector('.filter-sidebar .space-y-8 > div:first-child');
            if (categorySection) {
                let filterHTML = '<h3 class="font-orbitron text-lg font-bold text-white mb-4">Categories</h3>';
                filterHTML += '<div class="space-y-3">';
                
                // Add "All Designs" option
                filterHTML += `
                    <label class="flex items-center space-x-3 cursor-pointer">
                        <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent category-checkbox" checked data-category="All Designs" />
                        <span class="text-text-primary">All Designs</span>
                        <span class="text-text-secondary text-sm ml-auto" id="all-designs-count">(0)</span>
                    </label>
                `;
                
                // Add dynamic categories - only if categories are loaded
                if (allCategories && allCategories.length > 0) {
                    allCategories.forEach(category => {
                        if (category.name !== 'Uncategorized') {
                            const categoryId = category.name.toLowerCase().replace(/[^a-z0-9]/g, '-');
                            filterHTML += `
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="checkbox" class="w-4 h-4 text-accent bg-surface border-surface-light rounded focus:ring-accent category-checkbox" data-category="${category.name}" />
                                    <span class="text-text-primary">${category.name}</span>
                                    <span class="text-text-secondary text-sm ml-auto" id="${categoryId}-count">(0)</span>
                                </label>
                            `;
                        }
                    });
                }
                
                filterHTML += '</div>';
                console.log('📝 Generated filter HTML:', filterHTML);
                categorySection.innerHTML = filterHTML;
                console.log('✅ Category filter sidebar updated');
            }
            
            // Update mobile filter chips
            const mobileChipsSection = document.querySelector('.mobile-filter-chips');
            if (mobileChipsSection) {
                let chipsHTML = '';
                chipsHTML += '<button class="filter-chip active" data-category="all">All Designs</button>';
                
                if (allCategories && allCategories.length > 0) {
                    allCategories.forEach(category => {
                        if (category.name !== 'Uncategorized') {
                            const categoryId = category.name.toLowerCase().replace(/[^a-z0-9]/g, '-');
                            chipsHTML += `
                                <button class="filter-chip" data-category="${categoryId}">
                                    ${category.name}
                                </button>
                            `;
                        }
                    });
                }
                
                mobileChipsSection.innerHTML = chipsHTML;
            }
            
            // Re-attach event listeners
            setupCategoryEventListeners();
        }
        
        // Setup category event listeners
        function setupCategoryEventListeners() {
            // Remove old listeners
            const oldCheckboxes = document.querySelectorAll('.category-checkbox');
            oldCheckboxes.forEach(checkbox => {
                checkbox.removeEventListener('change', handleCategoryChange);
            });
            
            // Add new listeners
            const newCheckboxes = document.querySelectorAll('.category-checkbox');
            newCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', handleCategoryChange);
            });
        }
        
        // Handle category checkbox changes
        function handleCategoryChange() {
            const selectedCheckboxes = document.querySelectorAll('.category-checkbox:checked');
            selectedCategories = Array.from(selectedCheckboxes).map(checkbox => checkbox.dataset.category);
            
            if (selectedCategories.includes('All Designs')) {
                // If "All Designs" is selected, uncheck others
                document.querySelectorAll('.category-checkbox:not([data-category="All Designs"])').forEach(checkbox => {
                    checkbox.checked = false;
                });
                selectedCategories = ['All Designs'];
            } else {
                // Remove "All Designs" if specific categories are selected
                const allDesignsCheckbox = document.querySelector('.category-checkbox[data-category="All Designs"]');
                if (allDesignsCheckbox) allDesignsCheckbox.checked = false;
            }
            
            console.log('🎯 Selected categories:', selectedCategories);
            filterProductsByCategory();
        }
        
        function updateCategoryCounts() {
            const categoryCounts = {};
            
            // Count products in each category
            allProducts.forEach(product => {
                const category = product.category || 'Adult Shirts'; // Default category
                categoryCounts[category] = (categoryCounts[category] || 0) + 1;
            });
            
            // Update "All Designs" count
            const allDesignsElement = document.getElementById('all-designs-count');
            if (allDesignsElement) {
                allDesignsElement.textContent = `(${allProducts.length})`;
            }
            
            // Update all category count displays - only if categories are loaded
            if (allCategories && allCategories.length > 0) {
                allCategories.forEach(category => {
                    if (category.name !== 'Uncategorized') {
                        const categoryId = category.name.toLowerCase().replace(/[^a-z0-9]/g, '-');
                        const element = document.getElementById(`${categoryId}-count`);
                        if (element) {
                            element.textContent = `(${categoryCounts[category.name] || 0})`;
                        }
                    }
                });
            }
            
            console.log('✅ Category counts updated:', categoryCounts);
        }
        
        async function filterProductsByCategory() {
            // Now use the comprehensive filtering function that handles categories, size, and color
            await applyAllFilters();
        }
        
        // Size and Color filtering functionality
        let selectedSize = '';
        let selectedColor = '';
        
        // Size and color filter event listeners will be set up in the main DOMContentLoaded
        
        // Function to remove duplicate color options from a select element
        function removeDuplicateColorOptions(colorFilter) {
            console.log('🔍 Checking for duplicate color options in shop page...');
            const options = Array.from(colorFilter.options);
            const seenColors = new Set();
            const duplicates = [];
            
            options.forEach((option, index) => {
                const color = option.value;
                if (color && seenColors.has(color)) {
                    duplicates.push(option);
                    console.log(`    ❌ DUPLICATE FOUND: "${color}"`);
                } else if (color) {
                    seenColors.add(color);
                    console.log(`    ✅ Color: "${color}"`);
                }
            });
            
            // Remove duplicate elements
            duplicates.forEach(duplicate => {
                console.log(`🗑️ Removing duplicate: "${duplicate.value}"`);
                duplicate.remove();
            });
            
            if (duplicates.length > 0) {
                console.log(`🧹 Removed ${duplicates.length} duplicate color options`);
            } else {
                console.log(`✅ No duplicate color options found`);
            }
        }
        
        // Function to apply all filters (category, size, color)
        async function applyAllFilters() {
            try {
                let allFilteredProducts = [];
                
                // First, get products based on category filter
                if (selectedCategories.includes('All Designs')) {
                    const response = await fetch('/api/products/public');
                    if (response.ok) {
                        allFilteredProducts = await response.json();
                        console.log('🔍 Fetched all products:', allFilteredProducts.length);
                    }
                } else if (selectedCategories.length > 0) {
                    console.log('🔍 Fetching products for categories:', selectedCategories);
                    for (const category of selectedCategories) {
                        const apiUrl = `/api/products/public?category=${encodeURIComponent(category)}`;
                        console.log('🔍 Fetching from:', apiUrl);
                        const response = await fetch(apiUrl);
                        if (response.ok) {
                            const categoryProducts = await response.json();
                            console.log(`🔍 Category "${category}" returned ${categoryProducts.length} products:`, categoryProducts.map(p => ({ name: p.name, category: p.category })));
                            allFilteredProducts = [...allFilteredProducts, ...categoryProducts];
                        } else {
                            console.error(`❌ Failed to fetch category "${category}":`, response.status);
                        }
                    }
                    console.log('🔍 Total products after category filtering:', allFilteredProducts.length);
                    console.log('🔍 All fetched products:', allFilteredProducts.map(p => ({ name: p.name, category: p.category })));
                }
                
                // Then apply size and color filters to the results
                let finalFilteredProducts = allFilteredProducts.filter(product => {
                    let matchesSize = true;
                    let matchesColor = true;
                    
                    // Size filtering
                    if (selectedSize && selectedSize !== '') {
                        // Check if product has the selected size available
                        if (product.sizes && Array.isArray(product.sizes)) {
                            matchesSize = product.sizes.includes(selectedSize);
                        } else if (product.size_stock && typeof product.size_stock === 'object') {
                            matchesSize = product.size_stock.hasOwnProperty(selectedSize);
                        } else {
                            // If no size data, assume it matches (fallback)
                            matchesSize = true;
                        }
                    }
                    
                    // Color filtering
                    if (selectedColor && selectedColor !== '') {
                        // Check if product has the selected color available
                        if (product.colors && Array.isArray(product.colors)) {
                            matchesColor = product.colors.includes(selectedColor);
                        } else {
                            // If no color data, assume it matches (fallback)
                            matchesColor = true;
                        }
                    }
                    
                    return matchesSize && matchesColor;
                });
                
                console.log('🔍 Applying all filters:');
                console.log('   Categories:', selectedCategories);
                console.log('   Size:', selectedSize || 'All');
                console.log('   Color:', selectedColor || 'All');
                console.log(`   Results: ${finalFilteredProducts.length} of ${allFilteredProducts.length} products`);
                
                // Reset pagination
                currentPage = 0;
                totalPages = Math.ceil(finalFilteredProducts.length / productsPerPage);
                
                // Store filtered products globally for pagination
                filteredProducts = finalFilteredProducts;
                window.filteredProducts = finalFilteredProducts; // Also set on window for global access
                
                // Display filtered products
                displayProducts(0, finalFilteredProducts);
                updateProductCounts(finalFilteredProducts.length);
                
            } catch (error) {
                console.error('❌ Error applying filters:', error);
            }
        }

        // Function to reset filters and return to showing all products
        function resetFilters() {
            // Clear active filter buttons visually
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-pressed', 'false');
            });

            // Clear the global filteredProducts array
            window.filteredProducts = [];

            // Reset to first page
            currentPage = 0;

            // Clear search
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.value = '';
            }

            // Re-display all products from the first page
            displayProducts(0, window.allProducts);

            // Update counts based on all products
            if (window.allProducts) {
                updateProductCounts(window.allProducts.length);
            }
            console.log('Filters reset, displaying all products.');
        }

        // Function to load customer wishlist and update button states
        async function loadWishlistStates() {
            try {
                const token = localStorage.getItem('customerToken');
                if (!token) return; // Not logged in, skip wishlist state loading

                const response = await fetch('/api/customer/wishlist', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    const wishlistProductIds = data.wishlist ? data.wishlist.map(item => item.product_id || item.id) : [];
                    
                    console.log('🔍 Customer wishlist product IDs:', wishlistProductIds);
                    
                    // Update all wishlist buttons on the page
                    document.querySelectorAll('.wishlist-btn').forEach(btn => {
                        const productId = parseInt(btn.dataset.productId);
                        if (wishlistProductIds.includes(productId)) {
                            btn.classList.add('active');
                            btn.innerHTML = `
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                            `;
                        }
                    });
                } else {
                    console.log('Failed to load wishlist states');
                }
            } catch (error) {
                console.error('Error loading wishlist states:', error);
            }
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('🚀 DOM loaded, starting initialization...');
            try {
                // Create particles
                createParticles();
                
                // Add event listeners for cart buttons
                document.getElementById('desktop-cart-btn').addEventListener('click', () => {
                    window.location.href = 'cart.html';
                });
                document.getElementById('mobile-cart-btn').addEventListener('click', () => {
                    window.location.href = 'cart.html';
                });
                
                // Debug: Check if productsGrid exists
                const productsGrid = document.getElementById('products-grid');
                console.log('🔍 productsGrid element:', productsGrid);
                
                // Load categories first
                await loadCategories();
                console.log('✅ Categories loaded, now loading products...');
                
                // Set up size and color filter event listeners
                const sizeFilter = document.getElementById('size-filter');
                const colorFilter = document.getElementById('color-filter');
                const clearFiltersBtn = document.getElementById('clear-filters-btn');
                
                // Remove duplicate color options if they exist
                if (colorFilter) {
                    removeDuplicateColorOptions(colorFilter);
                }
                
                if (sizeFilter) {
                    sizeFilter.addEventListener('change', () => {
                        selectedSize = sizeFilter.value;
                        console.log('🎯 Selected size filter:', selectedSize);
                        applyAllFilters();
                    });
                }
                
                if (colorFilter) {
                    colorFilter.addEventListener('change', () => {
                        selectedColor = colorFilter.value;
                        console.log('🎨 Selected color filter:', selectedColor);
                        applyAllFilters();
                    });
                }
                
                if (clearFiltersBtn) {
                    clearFiltersBtn.addEventListener('click', () => {
                        // Reset all filters
                        selectedSize = '';
                        selectedColor = '';
                        selectedCategories = ['All Designs'];
                        
                        // Reset UI
                        if (sizeFilter) sizeFilter.value = '';
                        if (colorFilter) colorFilter.value = '';
                        
                        // Reset category checkboxes
                        document.querySelectorAll('.category-checkbox').forEach(checkbox => {
                            checkbox.checked = checkbox.dataset.category === 'All Designs';
                        });
                        
                        console.log('🧹 All filters cleared');
                        resetFilters();
                    });
                }
                
                // Load products from database
                await loadProductsFromDatabase();
                console.log('✅ Products loaded successfully!');
                console.log('🔍 All products array length:', allProducts.length);
                console.log('🔍 First product:', allProducts[0]);
                
                // Load recommendations after products are loaded
                await loadRecommendations();
                console.log('✅ Recommendations loaded!');
                
                // Load recently viewed products with a small delay to ensure main products are loaded
                setTimeout(async () => {
                    await loadRecentlyViewedProducts();
                    console.log('✅ Recently viewed products loaded!');
                }, 100);
                
                // Update cart counter
                updateCartCounter();
                
                // Load wishlist states after products are loaded
                setTimeout(() => {
                    loadWishlistStates();
                }, 1500);
                
                // Check auth status
                checkAuthStatus();
                
                console.log('✅ Shop page loaded with new black/orange theme!');
                
                // Load dynamic categories and implement search
                loadShopCategories();
                initializeSearch();
            } catch (error) {
                console.error('❌ Error during initialization:', error);
            }
        });

        // Load dynamic categories for search dropdown
        async function loadShopCategories() {
            try {
                const response = await fetch('/api/categories/top');
                const categories = await response.json();
                
                const categoriesContainer = document.getElementById('search-categories');
                if (categoriesContainer && categories.length > 0) {
                    categoriesContainer.innerHTML = categories.slice(0, 4).map(category => 
                        `<button class="flex items-center space-x-3 w-full text-left hover:bg-surface-light p-2 rounded" onclick="filterByCategory('${category.category}')">
                            <div class="w-8 h-8 rounded bg-accent bg-opacity-20 flex items-center justify-center">
                                <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2"/>
                                </svg>
                            </div>
                            <span class="text-text-primary">${category.category}</span>
                        </button>`
                    ).join('');
                } else if (categoriesContainer) {
                    categoriesContainer.innerHTML = '<div class="text-gray-500 text-sm">No categories available</div>';
                }
            } catch (error) {
                console.error('Error loading categories:', error);
                const categoriesContainer = document.getElementById('search-categories');
                if (categoriesContainer) {
                    categoriesContainer.innerHTML = '<div class="text-gray-500 text-sm">Error loading categories</div>';
                }
            }
        }

        // Initialize search functionality
        function initializeSearch() {
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                let searchTimeout;
                
                searchInput.addEventListener('input', (e) => {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        const query = e.target.value.trim();
                        if (query.length >= 2) {
                            performSearch(query);
                        } else if (query.length === 0) {
                            clearSearch();
                        }
                    }, 300);
                });
                
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const query = e.target.value.trim();
                        if (query.length >= 2) {
                            performSearch(query);
                        }
                    }
                });
            }
        }

        // Perform search
        async function performSearch(query) {
            try {
                console.log('Searching for:', query);
                // Redirect to shop with search parameter
                window.location.href = `shop.html?search=${encodeURIComponent(query)}`;
            } catch (error) {
                console.error('Search error:', error);
            }
        }

        // Filter by category
        function filterByCategory(category) {
            console.log('Filtering by category:', category);
            window.location.href = `shop.html?category=${encodeURIComponent(category)}`;
        }

        // Clear search
        function clearSearch() {
            // Reset to show all products
            window.location.href = 'shop.html';
        }

        // Particles are already initialized in the main DOMContentLoaded listener above
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>